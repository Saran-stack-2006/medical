<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Services</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <style>/* Global styles */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to right, #c9d6ff, #e2e2e2);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 40px;
        }
        
        /* Container styling */
        .container {
            margin-top: 10px;
            text-align: center;
            
        }
        
        /* Doctor and chat section */
        .doctor-card {
            border-radius: 16px;
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: 0.3s ease;
        }
        
        .doctor-card:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        }
        
        .doctor-name {
            font-weight: 700;
            font-size: 1.4rem;
        }
        
        .rating {
            color: #ffc107;
        }
        
        /* Modal and form styles */
        .modal-content {
            background: #f8f9fa;
        }
        
        .modal-header {
            background-color: #28a745;
            color: white;
        }
        
        .modal-body {
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .modal-title {
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-control {
            border-radius: 8px;
            border: 2px solid #28a745;
            padding: 10px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            border-color: #218838;
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }
        
        .btn-success {
            background-color: #28a745;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
        }
        
        .btn-success:hover {
            background-color: #218838;
            transition: all 0.3s ease;
        }
        
        /* Review section */
        .review-container {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
        }
        
        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .star-rating {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        
        .star {
            font-size: 2rem;
            cursor: pointer;
            color: lightgray;
            transition: color 0.2s;
        }
        
        .star.selected {
            color: gold;
        }
        
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 12px;
            resize: vertical;
            margin-bottom: 20px;
        }
        
        button {
            background-color: #4caf50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .submitted-reviews {
            margin-top: 30px;
        }
        
        .review-card {
            background-color: #f9f9f9;
            border-left: 5px solid #4caf50;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05);
        }
        
        .review-card .stars {
            color: gold;
        }
        
        .review-card .text {
            margin-top: 5px;
            color: #333;
        }
        
        /* Video & Controls */
        .video-container {
            position: relative;
            background-color: #000;
            width: 100%;
            height: 450px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .video-container video {
            width: 100%;
            height: 100%;
        }
        
        .overlay-text {
            position: absolute;
            top: 10px;
            left: 20px;
            color: #fff;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px;
            border-radius: 5px;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }
        
        .controls button {
            margin: 0 10px;
            font-size: 18px;
        }
        
        button#start-call {
            background-color: #28a745;
            color: white;
        }
        
        button#start-call:disabled {
            background-color: #6c757d;
        }
        
        button#mute {
            background-color: #ffc107;
        }
        
        button#end-call {
            background-color: #dc3545;
        }
        
        button#chat {
            background-color: #17a2b8;
        }
        
        /* Chat box */
        .chat-box {
            height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
            background: #fff;
        }
        
        /* Doctor info styling */
        .doctor-info {
            text-align: center;
            padding: 20px;
        }
        
        .doctor-info img {
            border-radius: 50%;
            margin-bottom: 20px;
        }
        
        .doctor-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-bottom: 10px;
        }
        
        /* Waiting room */
        #waiting-room {
            display: none;
            margin-top: 50px;
        }
        
        /* Confirmation message */
        .confirmation-message {
            font-size: 1.2rem;
            color: #28a745;
            font-weight: bold;
            padding-top: 10px;
        }
        
        /* Modal fade effect */
        .modal.fade .modal-dialog {
            transform: scale(0.7);
            transition: transform 0.3s ease-in-out;
        }
        
        .modal.fade.show .modal-dialog {
            transform: scale(1);
        }
        
    </style>
</head>

<body><div class="container py-5">
    <ul class="nav nav-tabs" id="serviceTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="consult-tab" data-bs-toggle="tab" data-bs-target="#consult" type="button" role="tab">Consultation</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="search-tab" data-bs-toggle="tab" data-bs-target="#search" type="button" role="tab">Find Doctors</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="video-consultation-tab" data-bs-toggle="tab" data-bs-target="#video-consultation" type="button" role="tab">Instant Video Consultation</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="followup-tab" data-bs-toggle="tab" data-bs-target="#followup" type="button" role="tab">Follow-Up Consultation</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="review-tab" data-bs-toggle="tab" data-bs-target="#review" type="button" role="tab">Rate & Review</button>
        </li>
    </ul>

    <div class="tab-content">
        <!-- Online Consultation -->
        <div class="tab-pane fade show active" id="consult" role="tabpanel">
            <div class="text-center mt-4">
                <img src="../static/assets/image3.jpg" alt="Doctor" class="doctor-image">
                <h2>Online Medical Consultation</h2>
                <p>Fill out your details to start a consultation:</p>
                <input type="text" class="form-control mb-2" id="patientName" placeholder="Your Name">
                <input type="text" class="form-control mb-2" id="symptoms" placeholder="Enter Symptoms">
                <button class="btn btn-primary" onclick="startConsultation()">Start Consultation</button>

                <div class="chat-box mt-3" id="chatBox">
                    <p><strong>Doctor:</strong> Hello! How can I help you today?</p>
                </div>
            </div>
        </div>

        <!-- Doctor Search -->
        <div class="tab-pane fade" id="search" role="tabpanel">
            <div class="text-center my-4">
                <button class="btn btn-primary btn-lg" onclick="startDoctorSearch()">Start Doctor Search</button>
            </div>

            <div class="search-box">
                <form id="searchForm">
                    <div class="row g-4 align-items-end">
                        <div class="col-md-4">
                            <input type="text" id="searchName" class="form-control" placeholder="Doctor Name">
                        </div>
                        <div class="col-md-3">
                            <select id="filterSpecialist" class="form-select">
                                <option value="">All Specialties</option>
                                <option value="Dermatologist">Dermatologist</option>
                                <option value="Cardiologist">Cardiologist</option>
                                <option value="Neurologist">Neurologist</option>
                                <option value="Dentist">Dentist</option>
                                <option value="Orthopedic">Orthopedic</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="filterRating" class="form-select">
                                <option value="">All Ratings</option>
                                <option value="4">4★ & up</option>
                                <option value="3">3★ & up</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="filterAvailability" class="form-select">
                                <option value="">Anytime</option>
                                <option value="today">Today</option>
                                <option value="weekend">Weekend</option>
                            </select>
                        </div>
                        <div class="col-md-1 d-grid">
                            <button type="button" class="btn btn-primary" onclick="filterDoctors()">Search</button>
                        </div>
                    </div>
                </form>
            </div>

            <div id="doctorList" class="mt-5"></div>
        </div>

        <!-- Instant Video Consultation -->
        <div class="tab-pane fade" id="video-consultation" role="tabpanel">
            <div id="video-room" class="row">
                <div class="col-md-8">
                    <div id="video-feed" class="video-container">
                        <video id="doctor-video" autoplay></video>
                        <div class="overlay-text">
                            <h5>Cardiologist: Dr. John Doe</h5>
                            <p>Specialist in Heart Diseases</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="doctor-info">
                        <img src="doctor-profile.jpg" class="img-fluid" alt="Doctor">
                        <h3>Dr. John Doe</h3>
                        <p>Cardiologist</p>
                        <button class="btn btn-primary" id="start-call">Start Consultation</button>
                    </div>
                </div>
            </div>

            <!-- Waiting Room -->
            <div id="waiting-room" class="text-center mt-4">
                <h3>Waiting for the doctor to join...</h3>
                <p>Estimated wait time: <span id="timer">00:00</span></p>
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>

            <div id="controls" class="controls text-center mt-3">
                <button id="mute" class="btn btn-warning"><i class="fas fa-microphone-slash"></i> Mute</button>
                <button id="end-call" class="btn btn-danger"><i class="fas fa-phone-slash"></i> End Call</button>
                <button id="chat" class="btn btn-info"><i class="fas fa-comment"></i> Chat</button>
            </div>
        </div>

        <!-- Follow-Up Consultation -->
        <div class="tab-pane fade" id="followup" role="tabpanel">
            <div class="text-center mt-4">
                <h4>Schedule a Follow-Up Consultation</h4>
                <div class="form-group">
                    <label for="followUpDate">Select Date</label>
                    <input type="date" class="form-control w-50 mx-auto" id="followUpDate" required>
                </div>
                <div class="mt-3">
                    <button class="btn btn-success" id="scheduleButton">Schedule</button>
                </div>
                <div id="confirmationMessage" class="confirmation-message mt-2"></div>
            </div>
        </div>
        <center>
        <!-- Review & Rating -->
        <div class="tab-pane fade" id="review" role="tabpanel">
            <div class="review-container">
                <h2>Rate & Review Dr. Priya</h2>
                <div class="doctor-info">
                    <p><strong>Specialist:</strong> Endocrinologist</p>
                </div>
                <div class="star-rating" id="starRating">
                    <span class="star" data-value="1">&#9733;</span>
                    <span class="star" data-value="2">&#9733;</span>
                    <span class="star" data-value="3">&#9733;</span>
                    <span class="star" data-value="4">&#9733;</span>
                    <span class="star" data-value="5">&#9733;</span>
                </div>
                <textarea id="reviewText" rows="4" placeholder="Write your review here..."></textarea>
                <button onclick="submitReview()">Submit Review</button>

                <div class="submitted-reviews" id="reviewList"></div>
            </div>
        </div>
    </div>
</div>
</center>
<!-- Booking Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Book Appointment</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <input type="date" class="form-control mb-2" id="appointmentDate" required>
                    <input type="time" class="form-control mb-2" id="appointmentTime" required>
                    <textarea class="form-control" placeholder="Additional info"></textarea>
                    <button class="btn btn-primary mt-2">Confirm Booking</button>
                </form>
            </div>
        </div>
    </div>
</div>






    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@twilio/video@2.15.0/dist/twilio-video.min.js"></script>
    <script>
        // Consultation and Doctor Search Scriptsfunction startConsultation() {
    const name = document.getElementById("patientName").value;
    const symptoms = document.getElementById("symptoms").value;
    const chatBox = document.getElementById("chatBox");

    if (name && symptoms) {
        chatBox.innerHTML += `<p><strong>${name}:</strong> I have ${symptoms}.</p>`;
        chatBox.innerHTML += `<p><strong>Doctor:</strong> Thank you for sharing, ${name}. Let's discuss further...</p>`;
        chatBox.scrollTop = chatBox.scrollHeight;
    }


const doctors = [
    { name: "Dr. Aarthi Raman", specialization: "Dermatologist", rating: 4.5, availability: "today" },
    { name: "Dr. Rahul Menon", specialization: "Cardiologist", rating: 4.2, availability: "weekend" },
    { name: "Dr. Priya Seth", specialization: "Neurologist", rating: 3.9, availability: "today" },
    { name: "Dr. Kumar R", specialization: "Dentist", rating: 4.8, availability: "today" },
    { name: "Dr. Sneha Iyer", specialization: "Orthopedic", rating: 4.6, availability: "weekend" }
];

function filterDoctors() {
    const searchName = document.getElementById("searchName").value.toLowerCase();
    const filterSpecialist = document.getElementById("filterSpecialist").value;
    const filterRating = document.getElementById("filterRating").value;
    const filterAvailability = document.getElementById("filterAvailability").value;

    let filteredDoctors = doctors;

    if (searchName) {
        filteredDoctors = filteredDoctors.filter(doctor => doctor.name.toLowerCase().includes(searchName));
    }
    if (filterSpecialist) {
        filteredDoctors = filteredDoctors.filter(doctor => doctor.specialization === filterSpecialist);
    }
    if (filterRating) {
        filteredDoctors = filteredDoctors.filter(doctor => doctor.rating >= filterRating);
    }
    if (filterAvailability) {
        filteredDoctors = filteredDoctors.filter(doctor => doctor.availability === filterAvailability);
    }

    displayDoctors(filteredDoctors);
}

function displayDoctors(doctorsList) {
    const doctorListDiv = document.getElementById("doctorList");
    doctorListDiv.innerHTML = "";

    if (doctorsList.length === 0) {
        doctorListDiv.innerHTML = "<p>No doctors found.</p>";
        return;
    }

    doctorsList.forEach(doctor => {
        const doctorCard = document.createElement("div");
        doctorCard.classList.add("doctor-card");

        doctorCard.innerHTML = `
            <h5 class="doctor-name">${doctor.name}</h5>
            <p class="text-muted">${doctor.specialization}</p>
            <p class="rating">${"★".repeat(Math.floor(doctor.rating))}</p>
            <p>Available: ${doctor.availability}</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#bookingModal">Book Now</button>
        `;

        doctorListDiv.appendChild(doctorCard);
    });
}

function getDefaultFollowUpDate() {
    const today = new Date();
    today.setDate(today.getDate() + 15); // Adding 15 days
    const dd = String(today.getDate()).padStart(2, '0');
    const mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
    const yyyy = today.getFullYear();
    return yyyy + '-' + mm + '-' + dd; // Returning date in YYYY-MM-DD format
}

// Set the default follow-up date
document.getElementById('followUpDate').value = getDefaultFollowUpDate();

// Handling the schedule button click
document.getElementById('scheduleButton').addEventListener('click', function () {
    const followUpDate = document.getElementById('followUpDate').value;

    if (followUpDate) {
        const confirmationMessage = `Your follow-up consultation is scheduled for ${followUpDate}.`;
        document.getElementById('confirmationMessage').innerText = confirmationMessage;
        document.getElementById('confirmationMessage').classList.add('animated', 'fadeIn');
    } else {
        alert('Please select a date for your follow-up consultation.');
    }
});

let selectedRating = 0;
const stars = document.querySelectorAll(".star");

stars.forEach(star => {
    star.addEventListener("click", () => {
        selectedRating = parseInt(star.getAttribute("data-value"));
        updateStars();
    });
});

function updateStars() {
    stars.forEach(star => {
        const value = parseInt(star.getAttribute("data-value"));
        if (value <= selectedRating) {
            star.classList.add("selected");
        } else {
            star.classList.remove("selected");
        }
    });
}

function submitReview() {
    const reviewText = document.getElementById("reviewText").value.trim();
    if (selectedRating === 0 || reviewText === "") {
        alert("Please select a rating and write a review.");
        return;
    }

    const reviewList = document.getElementById("reviewList");
    const reviewCard = document.createElement("div");
    reviewCard.classList.add("review-card");

    const starHTML = "&#9733;".repeat(selectedRating);
    reviewCard.innerHTML = `
        <div class="stars">${starHTML}</div>
        <div class="text">${reviewText}</div>
    `;

    reviewList.prepend(reviewCard);

    // Reset
    selectedRating = 0;
    updateStars();
    document.getElementById("reviewText").value = "";
}

    </script>
</body>

</html>
